<!-- src/app/public/historial-reservas/historial-reservas.component.html -->

<div class="container my-5">
  <div class="card shadow-lg rounded-lg border-0 p-4">
    <h1 class="text-center display-6 fw-bold">Mi Historial de Reservas</h1>

    <div *ngIf="isLoading" class="text-center my-5">
      <div
        class="spinner-border text-primary"
        role="status"
        style="width: 3rem; height: 3rem"
      >
        <span class="visually-hidden">Cargando...</span>
      </div>
      <p class="mt-3 fs-5 text-muted">Cargando tu historial de reservas...</p>
    </div>

    <div
      *ngIf="!isLoading && errorMessage"
      class="alert alert-info text-center my-4"
      role="alert"
    >
      <p class="mb-0 fs-5">{{ errorMessage }}</p>
      <button class="btn btn-primary mt-3" [routerLink]="['/catalogo']">
        Explorar Maquinarias
      </button>
    </div>

    <div *ngIf="!isLoading && !errorMessage">
      <div *ngIf="reservas$ | async as reservasList">
        <div *ngIf="reservasList.length > 0" class="table-responsive">
          <table class="table table-hover table-striped align-middle">
            <thead class="table-dark">
              <tr>
                <th scope="col">ID Reserva</th>
                <th scope="col">Desde</th>
                <th scope="col">Hasta</th>
                <th scope="col">Precio</th>
                <th scope="col">Fecha de Reserva</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let reserva of reservasList">
                <td>{{ reserva.id }}</td>
                <td>{{ reserva.fecha_inicio | date : "shortDate" }}</td>
                <td>{{ reserva.fecha_fin | date : "shortDate" }}</td>
                <td>${{ reserva.precio | number : "1.2-2" }}</td>
                <td>{{ reserva.createdAt | date : "shortDate" }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  h1 {
    color: #e08e00;
  }
</style>
